{
  "hash": "785f390c4f3ea6eb1d0435de98eb49d0",
  "result": {
    "markdown": "---\ntitle: \"Unlocking Insights (II): Analyzing Data with Summary Statistics and Independent Samples t-Test\"\ndescription: \"Discover how to extract valuable insights using summary statistics and the independent samples t-test, with a case study on team diversity within a large organization.\"\ncategories: [summary statistics, independent samples t-test, continuous variable, categorical variable, quantitative analysis]\ndraft: true\nformat: \n  revealjs: \n   theme: theme.scss\n   transition: fade\n   background-transition: fade\n   embed-resources: true\ncode-link: true\ntoc-depth: 1\nexecute:\n  echo: true\n  freeze: auto\n---\n\n\n# Overview of the Content\n\n\n::: {.cell}\n\n:::\n\n\n## Introducing two distinct tools for data analysis with numerical and categorical data using R\n\n-   Summary statistics\n-   Independent samples t-test\n\n## Case study\n\n-   Focused on diversity and inclusion (D&I)\n-   Sourced from the book [Predictive HR Analytics : Mastering the HR Metric](https://www.amazon.com/Predictive-HR-Analytics-Mastering-Metric/dp/0749473916)\n-   With data available [here](https://www.koganpage.com/hr-learning-development/predictive-hr-analytics-9780749484446)\n\n## Data preparation and exploration\n\n-   Packages: `tidyverse`, `kableExtra`, `car`, `paleteer` \n-   Data preparation\n-   Summary statistics\n-   Data visualization\n-   Independent samples t-test\n\n# Problem Statement\n\n## The Goal\n\n::: goal\n::: small\nA hypothetical company aims to employ scientific methods and procedures to tackle a significant problem: employee diversity. It recognizes that:\n:::\n:::\n\n::: small\n-   **Commercial Perspective**\n\n    -   A more diverse workforce can provide a competitive advantage by enhancing the organization's understanding of its customers, consequently improving overall performance.\n\n\n-   **People Perspective**\n\n    -   The organization gains access to a broader candidate pool, increases employee engagement, and elevates retention rates.\n:::\n\n## The research question\n\n<br>\n\n::: goal\n\nHow does the distribution of Black, Asian, or Minority Ethnic (BAME) employees vary across different professions?\n\n:::\n\n# Data Preparation and Exploration\n\n## Look at the data - The structure\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndiversity <- read_csv(\"../2023-10-11-summary-statistics-and-t-test/diversity2.csv\")\nglimpse(diversity)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 928\nColumns: 30\n$ DepartmentGroupNumber <dbl> 18, 19, 29, 30, 35, 37, 44, 45, 47, 50, 51, 63, …\n$ GroupSize             <dbl> 18, 28, 11, 17, 32, 60, 23, 36, 32, 70, 52, 15, …\n$ PercentMale           <dbl> 65, 67, 33, 32, 18, 65, 15, 26, 65, 5, 75, 50, 5…\n$ BAME                  <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ NumberTeamLeads       <dbl> 3, 4, 2, 2, 5, 9, 3, 5, 5, 10, 7, 2, 4, 3, 9, 7,…\n$ NumberFeMaleTeamLeads <dbl> 1, 0, 0, 0, 3, 0, 1, 0, 0, 2, 0, 0, 1, 0, 1, 0, …\n$ Location              <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 3, 3, 3, 3, 3, 3, 2, 2, …\n$ LondonorNot           <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 1, 1, …\n$ Function              <dbl> 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, …\n$ EMPsurvEngage_1       <dbl> 100, 96, 100, 100, 81, 97, 91, 100, 91, 97, 92, …\n$ EMPsurvEngage_2       <dbl> 100, 86, 91, 100, 69, 97, 100, 94, 88, 97, 94, 1…\n$ EMPsurvEngage_3       <dbl> 94, 86, 100, 100, 72, 87, 100, 89, 91, 93, 98, 9…\n$ EMPsurvEngage_4       <dbl> 78, 54, 82, 94, 44, 92, 87, 97, 81, 90, 98, 87, …\n$ EMPsurvEngage_5       <dbl> 100, 96, 100, 100, 81, 97, 100, 97, 97, 99, 94, …\n$ EMPsurvEngage_6       <dbl> 94, 57, 82, 88, 44, 78, 87, 94, 72, 90, 88, 87, …\n$ EMPsurvEngage_7       <dbl> 89, 89, 100, 100, 84, 92, 96, 97, 94, 99, 98, 10…\n$ EMPsurvEngage_8       <dbl> 72, 82, 73, 88, 38, 55, 91, 69, 69, 80, 69, 80, …\n$ EMPsurvEngage_9       <dbl> 78, 82, 91, 94, 47, 83, 96, 78, 81, 93, 85, 93, …\n$ EMPsurvEngagement     <dbl> 89, 81, 91, 96, 62, 86, 94, 91, 85, 93, 91, 92, …\n$ EMPorgIntegrity1      <dbl> 72, 75, 73, 100, 59, 87, 100, 61, 69, 69, 67, 60…\n$ EMPorgIntegrity2      <dbl> 78, 86, 91, 100, 81, 92, 100, 89, 91, 94, 92, 10…\n$ EMPorgIntegrity3      <dbl> 89, 89, 91, 100, 88, 93, 100, 89, 97, 97, 94, 10…\n$ EMPorgIntegrity4      <dbl> 89, 89, 91, 100, 78, 80, 100, 81, 78, 80, 80, 93…\n$ EMPorgIntegrity5      <dbl> 18, 19, 29, 30, 35, 37, 44, 45, 47, 50, 51, 63, …\n$ EmpSurvOrgIntegrity   <dbl> 69.2, 71.6, 75.0, 86.0, 68.2, 77.8, 88.8, 73.0, …\n$ EMPsurvSUP1           <dbl> 72, 79, 73, 100, 81, 88, 100, 75, 78, 96, 98, 87…\n$ EMPsurvSUP2           <dbl> 89, 79, 91, 100, 78, 92, 100, 83, 94, 96, 94, 93…\n$ EMPsurvSUP3           <dbl> 89, 64, 73, 100, 72, 78, 96, 78, 72, 90, 94, 100…\n$ EMPsurvSUP4           <dbl> 83, 82, 73, 100, 75, 87, 100, 78, 84, 91, 98, 80…\n$ EmpSurvSupervisor     <dbl> 83.25, 76.00, 77.50, 100.00, 76.50, 86.25, 99.00…\n```\n:::\n:::\n\n\n::: small\n\n - The organization comprises 29,976 employees in two functional areas across the UK, and these employees are organized into 928 teams.\n - The data set contains 30 variables.\n \n:::\n\n## Description of variables of interest\n\n<br>\n\n::: small\n-   **Variables of Interest:**\n\n    -   **BAME:** Percentage of the team comprised of Black, Asian, or Minority Ethnic employees.\n\n    -   **Function:** Function 1 = Sales staff (customer-facing roles) or 2 = Professional Service (non-customer-facing roles).\n\n-   Both variables are of data type double (dbl), in the data set.\n\n-   The \"BAME\" variable is numerical, while the \"Function\" variable is categorical and needs to be transformed into a factor for R analysis.\n:::\n\n## Data preparation (I)\n\n::: small\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create a new variable named \"profession\" with two levels \"Sales Staff\" and \"Professional Service\"\ndiversity <- diversity|>\n  mutate(profession = factor(Function,\n                           levels = c(1:2),\n                           labels = c(\"Sales Staff\", \"Professional Service\")))\n\n\n# Check levels of the new variable\ndiversity|>\n  distinct(diversity$profession)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 1\n  `diversity$profession`\n  <fct>                 \n1 Professional Service  \n2 Sales Staff           \n3 <NA>                  \n```\n:::\n\n```{.r .cell-code}\n# Drop \"NA\" levels as they are not meaningful for the analysis\ndiversity_filtered <- diversity|>\n  filter(profession != \"NA\")|>\n  droplevels()\n\n# Check variable levels after dropping \"NA\" \ndiversity_filtered|>\n  distinct(profession)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2 × 1\n  profession          \n  <fct>               \n1 Professional Service\n2 Sales Staff         \n```\n:::\n:::\n\n:::\n\n## Data preparation (II)\n\n::: small\n\n::: {.cell}\n\n```{.r .cell-code}\n#| label: new-data-frame-BAME_profession\n\n\n# Creating a new data frame \"bame_profession\" including variables of interest\n\nbame_profession <- diversity_filtered|>\n  select(BAME, profession)\n\nglimpse(bame_profession)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 927\nColumns: 2\n$ BAME       <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n$ profession <fct> Professional Service, Professional Service, Professional Se…\n```\n:::\n:::\n\n:::\n\n# Summary statistics\n\n## Summary statistics: Measures of center\n\n<br>\n\n::: small\n\n::: {.cell}\n\n```{.r .cell-code}\nbame_profession|>\n  group_by(profession)|>\n  summarise(mean=mean(BAME, na.rm = TRUE),\n            median=median(BAME, na.rm = TRUE),\n            iqr=IQR(BAME, na.rm =TRUE),\n            sd=sd(BAME, na.rm = TRUE),\n            n= sum(!is.na(BAME)))|>\n  kable(col.names = c(\"Profession\", \"Mean\", \"Median\", \"IQR\", \"Std. Deviation\", \"Sum\"), align = \"cccc\")\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:center;\"> Profession </th>\n   <th style=\"text-align:center;\"> Mean </th>\n   <th style=\"text-align:center;\"> Median </th>\n   <th style=\"text-align:center;\"> IQR </th>\n   <th style=\"text-align:center;\"> Std. Deviation </th>\n   <th style=\"text-align:center;\"> Sum </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:center;\"> Sales Staff </td>\n   <td style=\"text-align:center;\"> 0.0968317 </td>\n   <td style=\"text-align:center;\"> 0.05 </td>\n   <td style=\"text-align:center;\"> 0.09 </td>\n   <td style=\"text-align:center;\"> 0.0976745 </td>\n   <td style=\"text-align:center;\"> 404 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> Professional Service </td>\n   <td style=\"text-align:center;\"> 0.1438596 </td>\n   <td style=\"text-align:center;\"> 0.10 </td>\n   <td style=\"text-align:center;\"> 0.16 </td>\n   <td style=\"text-align:center;\"> 0.1247931 </td>\n   <td style=\"text-align:center;\"> 342 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n:::\n\n::: goal\n::: small\n-   There is a difference between the mean, median, IQR, and standard deviation of the BAME percentage in the \"Sales Staff\" and \"Professional Service\" groups.\n-   404 teams within the \"Sales Staff\" profession and 342 teams within \"Professional Service\" profession reported the percentages of BAME.\n:::\n:::\n\n## Summary statistics: Density plot\n\n::: small\n::: columns\n::: {.column width=\"75%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(bame_profession, aes(x=BAME, fill=profession))+\n  geom_density(alpha = 0.5)+\n  labs(title = \"BAME distribution by Profession\",\n      x = \"BAME percentage\",\n      y = \"Density\",\n      fill = \"Profession\")+\n  theme_minimal(base_size = 14)+\n  scale_fill_manual(values = c(\"Sales Staff\"= \"#33645FFF\", \"Professional Service\" = \"#9D1B1FFF\" ))\n```\n\n::: {.cell-output-display}\n![](slides1_files/figure-revealjs/density-plot-1.png){width=960}\n:::\n:::\n\n:::\n\n::: {.column width=\"25%\"}\n<br><br><br><br>\n\nThe percentages of BAME employees are lower within \"Sales Staff\" teams, whereas they are more evenly distributed among \"Professional Service\" teams.\n:::\n:::\n:::\n\n## Summary statistics: Boxplots with points\n\n::: small\n::: columns\n::: {.column width=\"75%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(bame_profession, aes(x=profession, y= BAME, color = profession))+\n  geom_boxplot(width = 0.5)+\n  geom_jitter(width = 0.3)+\n  labs( title= \"BAME variance by Profession\", \n        x= NULL,\n        y= \"BAME percentage\")+\n  theme_minimal(base_size = 14)+\n  scale_color_manual(values = c(\"Sales Staff\"= \"#33645FFF\", \"Professional Service\" = \"#9D1B1FFF\" ))+\n  theme(legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![](slides1_files/figure-revealjs/boxplot-with-points-1.png){width=960}\n:::\n:::\n\n:::\n\n::: {.column width=\"25%\"}\n<br><br><br><br><br>\n\nThere is a higher variance of BAME representation in the \"Professional Service\" profession compared to the \"Sales Staff\" profession.\n:::\n:::\n:::\n\n## How does the distribution of BAME employees vary across different professions? (I)\n\n<br>\n\n::: small\n-   BAME employees are distributed differently across the two professions. There are more \"Sales Staff\" teams with a lower percentage of BAME employees, while \"Professional Service\" teams have a more even distribution.\n - It's essential to note that these findings are based on summary statistics and visual examinations, which may not be highly precise.\n - To gain more confidence in comparing BAME representation between the two professions and to deepen our understanding of the organization's ethnicity dynamics, we will conduct an Independent Samples t-Test.\n:::\n\n# Independent Samples t-Test\n\n## Levene's Test for Equality of Variances (I)\n\n::: small\n::: goal\nOne of the requirements for the Independent Samples t-Test is the homogeneity of variances (i.e., variances approximately equal across groups).\n:::\n\n-   If this requirement is violated, and the sample sizes for each group differ, we can calculate t-test statistics. The independent samples t-test output also includes an approximate t-statistic, which doesn't assume equal variances across populations. The Welch t-test statistic can be employed when equal variances between populations cannot be assumed.\n:::\n\n## Levene's Test for Equality of Variances (II)\n\n::: small\n**The hypotheses**\n\n-   H0: The population variances of \"Sales Staff\" and \"Professional Service\" are equal.\n-   H1: The population variances of \"Sales Staff\" and \"Professional Service\" are not equal.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nleveneTest(bame_profession$BAME, group = bame_profession$profession, center=mean)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nLevene's Test for Homogeneity of Variance (center = mean)\n       Df F value    Pr(>F)    \ngroup   1  35.396 4.141e-09 ***\n      744                      \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n```\n:::\n:::\n\n\n-   The p-value is 4.141e-09, which is less than 0.05. This indicates very strong evidence against the null hypothesis, leading us to reject the null hypothesis of Levene's Test.\n\n-   This suggests that the variances of the two groups are not equal, meaning the assumption of homogeneity of variances is violated.\n:::\n\n## Independent Samples t-Test (I)\n\n::: small\n-   We want to determine if there is a statistically significant difference between the mean percentages of BAME employees in the \"Sales Staff\" and \"Professional Service\" professions within this organization.\n-   To achieve this, we can employ an Independent Samples t-Test to compare the means of BAME percentages for \"Sales Staff\" and \"Professional Service.\"\n\n<br>\n\n**The hypotheses**\n\n-   H0: The difference of the means is equal to 0\n-   H1: The difference of the means is not equal to 0.\n:::\n\n## Independent Samples t-Test (II)\n\n::: small\n\n::: {.cell}\n\n```{.r .cell-code}\nt.test(bame_profession$BAME ~ bame_profession$profession, var.equal = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\tTwo Sample t-test\n\ndata:  bame_profession$BAME by bame_profession$profession\nt = -5.7695, df = 744, p-value = 1.166e-08\nalternative hypothesis: true difference in means between group Sales Staff and group Professional Service is not equal to 0\n95 percent confidence interval:\n -0.06302979 -0.03102614\nsample estimates:\n         mean in group Sales Staff mean in group Professional Service \n                        0.09683168                         0.14385965 \n```\n:::\n\n```{.r .cell-code}\nt.test(bame_profession$BAME ~ bame_profession$profession, var.equal = FALSE)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\tWelch Two Sample t-test\n\ndata:  bame_profession$BAME by bame_profession$profession\nt = -5.6553, df = 640.61, p-value = 2.345e-08\nalternative hypothesis: true difference in means between group Sales Staff and group Professional Service is not equal to 0\n95 percent confidence interval:\n -0.06335727 -0.03069866\nsample estimates:\n         mean in group Sales Staff mean in group Professional Service \n                        0.09683168                         0.14385965 \n```\n:::\n:::\n\n:::\n\n## Independent Samples t-Test (III)\n\n<br>\n\n - The result of Levene's Test suggests that we should consider using the Welch Two Sample t-test because the variances of the two groups are not equal.\n - The p-value is 2.345e-08 for the t-test for unequal variances, which is less than 0.001. Therefore, we can conclude that there is a significant difference in the mean percentage of BAME employees between the two functions.\n\n## How does the distribution of BAME employees vary across different professions? (II)\n\n::: small\n - When comparing the \"Sales Staff\" and \"Professional Service\" functions, it becomes evident that the mean proportion of BAME staff is significantly lower in \"Sales Staff\" than in \"Professional Service.\"\n - Specifically, the average proportion of BAME staff in teams within the \"Sales Staff\" function is 9.7%, while in \"Professional Service\" teams, it stands at 14.39%.\n - A more in-depth analysis reveals that the likelihood of this difference occurring by chance alone is less than 1 in 1,000, suggesting that there is a significant issue within the \"Sales Staff\" function that requires attention in the organization.\n:::\n\n# Conclusions\n\n## Analyzing BAME distribution across professional functions\n\n::: small\n-   Summary statistics and graphical visualization offer a concise overview of the distribution of BAME employees in the two professions. It's evident that more \"Sales Staff\" teams have a lower percentage of BAME employees, while \"Professional Service\" teams exhibit a more even distribution.\n\n-   The results of the independent samples t-test, with a p-value close to 0, confirm a significant difference in the mean percentage of BAME employees between the two functions. This implies that there is an issue that needs attention within the \"Sales Staff\" function in the organization.\n:::\n\n## Recommendations\n\n-   According to our analysis, the organization faces challenges in BAME representation across professions, particularly in the \"Sales Staff\".\n-   Further research should be conducted to identify the factors influencing or associated with the diversity disparities between these two teams.\n",
    "supporting": [
      "slides1_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\r\n<script>\r\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\r\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\r\n  // slide changes (different for each slide format).\r\n  (function () {\r\n    // dispatch for htmlwidgets\r\n    function fireSlideEnter() {\r\n      const event = window.document.createEvent(\"Event\");\r\n      event.initEvent(\"slideenter\", true, true);\r\n      window.document.dispatchEvent(event);\r\n    }\r\n\r\n    function fireSlideChanged(previousSlide, currentSlide) {\r\n      fireSlideEnter();\r\n\r\n      // dispatch for shiny\r\n      if (window.jQuery) {\r\n        if (previousSlide) {\r\n          window.jQuery(previousSlide).trigger(\"hidden\");\r\n        }\r\n        if (currentSlide) {\r\n          window.jQuery(currentSlide).trigger(\"shown\");\r\n        }\r\n      }\r\n    }\r\n\r\n    // hookup for slidy\r\n    if (window.w3c_slidy) {\r\n      window.w3c_slidy.add_observer(function (slide_num) {\r\n        // slide_num starts at position 1\r\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\r\n      });\r\n    }\r\n\r\n  })();\r\n</script>\r\n\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}