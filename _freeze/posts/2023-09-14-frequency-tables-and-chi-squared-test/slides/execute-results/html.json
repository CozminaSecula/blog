{
  "hash": "65fc00af25b86b02df5de99b9ba635fe",
  "result": {
    "markdown": "---\ntitle: \"Unlocking Insights (I): Analyzing Categorical Data with Cross-Tab and Chi-Squared Test\"\ndescription: \"Discover how to extract valuable insights from categorical data using frequency tables and the chi-squared test, with a case study on gender representation in senior roles.\"\ncategories: [frequency tables, chi-squared test, categorical data, quantitative analysis]\ndraft: true\nformat: \n  revealjs: \n   theme: theme.scss\n   transition: fade\n   background-transition: fade\n   embed-resources: true\ncode-link: true\ntoc-depth: 1\nexecute:\n  echo: true\n  freeze: auto\n---\n\n\n\n# Overview of the Content\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'stringr' was built under R version 4.3.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.2     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.4.3     ✔ tibble    3.2.1\n✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n\nAttaching package: 'kableExtra'\n\n\nThe following object is masked from 'package:dplyr':\n\n    group_rows\n```\n:::\n:::\n\n\n\n## Introducing two distinct tools for data analysis with categorical data using R\n\n-   Frequency tables\n-   Chi-squared test\n\n## Case study\n\n-   Focused on diversity and inclusion (D&I)\n-   Sourced from the book [Predictive HR Analytics : Mastering the HR Metric](https://www.amazon.com/Predictive-HR-Analytics-Mastering-Metric/dp/0749473916)\n-   With data available [here](https://www.koganpage.com/hr-learning-development/predictive-hr-analytics-9780749484446)\n\n## Data preparation and exploration\n\n-   Packages: `tidyverse`, `kableExtra` \n-   Data preparation and exploration\n-   Creation of cross-tab\n-   Data visualization\n-   Chi-squared test\n\n# Problem Statement\n\n## The business needs\n\n:::goal\n:::small\nA hypothetical company aims to employ scientific methods and procedures to address a significant people problem: gender diversity.\n:::\n:::\n\n-   **Commercial perspective**\n\n    -   The organization seeks to foster a greater diversity of thought in senior and strategic discussions.\n\n-   **People perspective**\n\n    -   The organization wants to assess whether it maintains gender balance by providing positive role models for younger employees.\n\n## The research question\n\n<br>\n\n::: goal\nAre women underrepresented in senior leadership roles within the organization?\n:::\n\n# Data Preparation and Exploration\n\n## Look at the data - The structure\n\n:::small\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndiversity <- read_csv(\"../2023-09-14-frequency-tables-and-chi-squared-test/diversity1.csv\")\nglimpse(diversity)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 1,493\nColumns: 11\n$ BossGender       <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…\n$ Gender           <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2,…\n$ JobGrade         <dbl> 6, 5, 5, 3, 6, 7, 6, 5, 6, 6, 5, 5, 5, 5, 3, 7, 6, 5,…\n$ Age              <dbl> 39, 37, 35, 30, 33, 40, 49, 37, 33, 38, 42, 31, 39, 2…\n$ Tenure           <dbl> 0, 6, 1, 3, 0, 0, 8, 1, 11, 2, 11, 6, 2, 0, 4, 2, 1, …\n$ Status           <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…\n$ PerformanceScore <dbl> 4, 4, 4, 4, NA, 4, 4, 5, 4, 4, 4, 4, 4, 4, 5, 4, 4, 4…\n$ BossPerformance  <dbl> 4, 3, 3, 3, 3, 4, 4, 4, 4, 4, 3, 3, 3, 3, 3, 4, 4, 4,…\n$ Division         <dbl> 12, 12, 6, 6, 8, 1, 8, 8, 8, 8, 6, 6, 6, 6, 6, 10, 7,…\n$ Country          <dbl> 3, 4, 7, 7, 7, 7, 8, 8, 9, 9, 9, 9, 9, 9, 9, 9, 3, 8,…\n$ leaver           <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…\n```\n:::\n:::\n\n\n\n-   The organization, a management consulting firm, has 1,493 employees.\n-   The data set contains 11 variables.\n-   Data type: double <dbl> for all variables.\n:::\n\n## Description of variables of interest\n\n<br>\n\n::: small\n::: columns\n::: {.column width=\"65%\"}\n| Level | Job Grade                   |\n|-------|-----------------------------|\n| 1     | Clerical/Officer            |\n| 2     | Administrator/Assistant     |\n| 3     | Graduate/Trainee Consultant |\n| 4     | Consultant                  |\n| 5     | Senior Consultant           |\n| 6     | Managing Consultant         |\n| 7     | Principal Consultant        |\n| 8     | Partner                     |\n:::\n\n::: {.column width=\"35%\"}\n| Level | Gender |\n|-------|--------|\n| 1     | Female |\n| 2     | Male   |\n:::\n:::\n:::\n\n## Data preparation (I)\n\n-   Create new variables *gender* and *jobgrade*.\n-   Replace numerical values with descriptive labels for both variables.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# create new variables \"gender\" and \"jobgrade\"\ndiversity <- diversity|>\n  mutate(gender= factor(Gender,\n                        levels= c(1:2),\n                        labels= c(\"Female\", \"Male\")),\n         jobgrade= factor(JobGrade,\n                          levels= c(1:8),\n                          labels= c(\"Clerical/Officer\", \"Administrator/Assistant\", \"Graduate/Trainee Consultant\", \"Consultant\", \"Senior Consultant\", \"Managing Consultant\", \"Principal Consultant\", \"Partner\")))\n```\n:::\n\n\n\n## Data preparation (II)\n\n-   Detect and rectify inaccuracies in the data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# variables' levels\ndiversity|>\n  distinct(gender, jobgrade)\n\n# filter and drop \"NA\" levels and name the new data frame \"diversity1\"\ndiversity1 <- diversity|>\n  filter(gender!=\"NA\")|>\n  droplevels()\n\n#variables' levels filtered\ndiversity1|>\n  distinct(gender, jobgrade)\n```\n:::\n\n\n\n## Cross-tab for insights\n\n::: small\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# cross-tab; count and make a table for \"gender\" and \"jobgrade\" data\ndiversity1|>\n  count(gender, jobgrade)|>\n  pivot_wider(names_from = gender, values_from = n)|>\n  kable(col.names = c(\"JobGrade\", \"Female\", \"Male\"),\n        align = \"lrr\")\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> JobGrade </th>\n   <th style=\"text-align:right;\"> Female </th>\n   <th style=\"text-align:right;\"> Male </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Clerical/Officer </td>\n   <td style=\"text-align:right;\"> 31 </td>\n   <td style=\"text-align:right;\"> 8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Administrator/Assistant </td>\n   <td style=\"text-align:right;\"> 227 </td>\n   <td style=\"text-align:right;\"> 116 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Graduate/Trainee Consultant </td>\n   <td style=\"text-align:right;\"> 160 </td>\n   <td style=\"text-align:right;\"> 103 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Consultant </td>\n   <td style=\"text-align:right;\"> 139 </td>\n   <td style=\"text-align:right;\"> 104 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Senior Consultant </td>\n   <td style=\"text-align:right;\"> 98 </td>\n   <td style=\"text-align:right;\"> 152 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Managing Consultant </td>\n   <td style=\"text-align:right;\"> 68 </td>\n   <td style=\"text-align:right;\"> 171 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Principal Consultant </td>\n   <td style=\"text-align:right;\"> 19 </td>\n   <td style=\"text-align:right;\"> 62 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Partner </td>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:right;\"> 29 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n:::\n\n## Proportions of gender within each jobgrade\n\n::: small\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndiversity1|>\n  count(gender, jobgrade)|>\n  group_by(jobgrade)|>\n  mutate(prop= round(n/sum(n)*100),2)|>\n  pivot_wider(id_cols = jobgrade, names_from = gender, values_from = prop)|>\n  kable(col.names = c(\"Job Grade\", \"Female (%)\", \"Male (%)\"),\n        align = \"lrr\")\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Job Grade </th>\n   <th style=\"text-align:right;\"> Female (%) </th>\n   <th style=\"text-align:right;\"> Male (%) </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Clerical/Officer </td>\n   <td style=\"text-align:right;\"> 79 </td>\n   <td style=\"text-align:right;\"> 21 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Administrator/Assistant </td>\n   <td style=\"text-align:right;\"> 66 </td>\n   <td style=\"text-align:right;\"> 34 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Graduate/Trainee Consultant </td>\n   <td style=\"text-align:right;\"> 61 </td>\n   <td style=\"text-align:right;\"> 39 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Consultant </td>\n   <td style=\"text-align:right;\"> 57 </td>\n   <td style=\"text-align:right;\"> 43 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Senior Consultant </td>\n   <td style=\"text-align:right;\"> 39 </td>\n   <td style=\"text-align:right;\"> 61 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Managing Consultant </td>\n   <td style=\"text-align:right;\"> 28 </td>\n   <td style=\"text-align:right;\"> 72 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Principal Consultant </td>\n   <td style=\"text-align:right;\"> 23 </td>\n   <td style=\"text-align:right;\"> 77 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Partner </td>\n   <td style=\"text-align:right;\"> 12 </td>\n   <td style=\"text-align:right;\"> 88 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n:::\n\n## Gender by job grade\n\n::: small\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(diversity1, aes(x=jobgrade, fill=gender))+\n  geom_bar(position = \"fill\", width = 0.7)+\n  labs(title = \"Gender by Job Grade\",\n      x = \"Job Grade\",\n      y = \"Proportions\",\n      fill= \"Gender\")+\n  theme_minimal(base_size = 14)+\n  scale_fill_manual(values = c(\"Female\" = \"#00589b\", \"Male\"= \"#ccddeb\"))+\n  coord_flip()\n```\n\n::: {.cell-output-display}\n![](slides_files/figure-html/graph I-1.png){fig-align='center' width=768}\n:::\n:::\n\n\n:::\n\n## Are women underrepresented in senior leadership roles within the organization?\n\n::: goal\n::: small\nUp to this point, the data reveal a clear pattern: men are more common in senior roles, while women tend to occupy junior positions.\n:::\n:::\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](slides_files/figure-html/graph II-1.png){fig-align='center' width=1152}\n:::\n:::\n\n\n\n## Does this organization have a gender diversity issue?\n\n<br>\n\n-   The data indicate a pattern where women are more commonly in junior roles and men in senior roles.\n-   However, it's unclear from the data whether this pattern is coincidental or statistically significant.\n-   To assess this, we can employ a chi-squared test to determine the statistical significance of the observed pattern.\n\n# Chi-Squared Test\n\n## The hypotheses\n\n<br>\n\n::: small\n**H0**: There is no association between gender and job grade within the organization.\n\n-   the observed distribution of females and males across job grades is due to random chance.\n\n**H1**: There is a significant association between gender and job grade within the organization.\n\n-   the observed distribution of females and males across job grades is not a result of random chance; it reflects a significant pattern of male predominance in senior roles and a greater representation of females in entry-level positions.\n:::\n\n## Chi squared test in R\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncross_tab <- table(diversity1$jobgrade, diversity1$gender)\nchisq.test(cross_tab)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\tPearson's Chi-squared test\n\ndata:  cross_tab\nX-squared = 164.7, df = 7, p-value < 2.2e-16\n```\n:::\n:::\n\n\n\n::: goal\n::: small\n-   The p-value is extremely small, less than 2.2e-16, which is very close to zero.\n-   Since the p-value is less than the significance level of 0.05, we can confidently reject the null hypothesis, concluding that the two variables are dependent.\n-   This result indicates a statistically significant association between gender and job grade.\n-   It suggests that certain factors are influencing the observed distribution of genders within job grades.\n:::\n:::\n\n# Conclusions\n\n## Analyzing gender distribution across job grades\n\n-   Frequency tables and graphical visualization offer a concise summary of gender distribution across job grades, revealing a clear pattern: **men are more common in senior roles, while women predominantly hold junior positions.**\n\n-   The results of the chi-squared test, with a p-value close to zero, confirm **a very strong association between gender and job grade.**\n\n## Recommendation\n\n-   While this statistical evidence does not directly imply a gender diversity issue within the organization, it signals that factors beyond chance influence the gender distribution across job grades.\n-   To address potential gender bias or discrimination and foster diversity and inclusion within the organization, further analysis and actions are necessary.\n",
    "supporting": [
      "slides_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}