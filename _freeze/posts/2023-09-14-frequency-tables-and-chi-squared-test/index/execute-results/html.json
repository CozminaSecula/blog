{
  "hash": "3f5ab0d00c41f690f7bb4c1b97a52d16",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Unlocking Insights (I): Analyzing Categorical Data with Cross-Tab and Chi-Squared Test\"\ndescription: \"Discover how to extract valuable insights from categorical data using frequency tables and the chi-squared test, with a case study on gender representation in senior roles.\"\nauthor: \"Cozmina Secula\"\ndate: \"2023-09-14\"\ncategories: [frequency tables, chi-squared test, quantitative analysis]\nimage: image.jpeg\n---\n\n\n# Introduction\n\nA people analytics project typically involves working with quantifiable data to address business questions and objectives. However, for data to be valuable, it requires analysis and interpretation, which is where analytic techniques become critical. This post introduces two distinct tools for initiating data analysis with categorical data: frequency tables and the chi-squared test.\n\nFrequency tables serve as a statistical instrument for categorical data analysis. They achieve this by counting the occurrences of variables within a data set, providing a concise overview of the distribution and patterns within these categorical variables. When analyzing categorical data, it is often essential to determine if a significant relationship exists between two categorical variables within data set. The chi-squared test helps determine whether these two variables are associated or functionally related. In simpler terms, it quantifies the degree of independence between two categorical variables. When employed together, these tools can unveil intriguing patterns and relationships within data.\n\nThe rest of this post will guide you through the utilization of frequency tables and the chi-squared test for insightful data analysis.\n\n\n## Introducing two distinct tools for data analysis with categorical data using R\n\n-   Frequency tables\n-   Chi-squared test\n\n## Case study\n\n-   Focused on diversity and inclusion (D&I)\n-   Sourced from the book [Predictive HR Analytics : Mastering the HR Metric](https://www.amazon.com/Predictive-HR-Analytics-Mastering-Metric/dp/0749473916)\n-   With data available [here](https://www.koganpage.com/hr-learning-development/predictive-hr-analytics-9780749484446)\n\n## Data preparation and exploration\n\n-   Packages: `tidyverse`, `kableExtra`\n-   Data preparation and exploration\n-   Creation of cross-tab\n-   Data visualization\n-   Chi-squared test\n\n# Problem Statement\n\n## The business needs\n\n\nA hypothetical company aims to employ scientific methods and procedures to address a significant people problem: gender diversity.\n\n\n-   **Commercial perspective**\n\n    -   The organization seeks to foster a greater diversity of thought in senior and strategic discussions.\n\n-   **People perspective**\n\n    -   The organization wants to assess whether it maintains gender balance by providing positive role models for younger employees.\n\n## The research question\n\n\n**Are women underrepresented in senior leadership roles within the organization?**\n\n\n# Data Preparation and Exploration\n\n## Load libraries\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n library(tidyverse)\n library(kableExtra)\n```\n:::\n\n\n\n## Look at the data - The structure\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndiversity <- read_csv(\"diversity1.csv\")\nglimpse(diversity)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 1,493\nColumns: 11\n$ BossGender       <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…\n$ Gender           <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2,…\n$ JobGrade         <dbl> 6, 5, 5, 3, 6, 7, 6, 5, 6, 6, 5, 5, 5, 5, 3, 7, 6, 5,…\n$ Age              <dbl> 39, 37, 35, 30, 33, 40, 49, 37, 33, 38, 42, 31, 39, 2…\n$ Tenure           <dbl> 0, 6, 1, 3, 0, 0, 8, 1, 11, 2, 11, 6, 2, 0, 4, 2, 1, …\n$ Status           <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…\n$ PerformanceScore <dbl> 4, 4, 4, 4, NA, 4, 4, 5, 4, 4, 4, 4, 4, 4, 5, 4, 4, 4…\n$ BossPerformance  <dbl> 4, 3, 3, 3, 3, 4, 4, 4, 4, 4, 3, 3, 3, 3, 3, 4, 4, 4,…\n$ Division         <dbl> 12, 12, 6, 6, 8, 1, 8, 8, 8, 8, 6, 6, 6, 6, 6, 10, 7,…\n$ Country          <dbl> 3, 4, 7, 7, 7, 7, 8, 8, 9, 9, 9, 9, 9, 9, 9, 9, 3, 8,…\n$ leaver           <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…\n```\n\n\n:::\n:::\n\n\n-   The organization, a management consulting firm, has 1,493 employees.\n-   The data set contains 11 variables.\n-   Data type (in the data set): numeric for all variables.\n\n\n## Variables of interest\n\n\n::: columns\n::: {.column width=\"65%\"}\n| Level | Job Grade                   |\n|-------|-----------------------------|\n| 1     | Clerical/Officer            |\n| 2     | Administrator/Assistant     |\n| 3     | Graduate/Trainee Consultant |\n| 4     | Consultant                  |\n| 5     | Senior Consultant           |\n| 6     | Managing Consultant         |\n| 7     | Principal Consultant        |\n| 8     | Partner                     |\n:::\n\n::: {.column width=\"35%\"}\n| Level | Gender |\n|-------|--------|\n| 1     | Female |\n| 2     | Male   |\n:::\n:::\n\n\n## Data preparation\n\n-   Transform variables of interest *gender* and *jobgrade* by replacing numerical values with descriptive labels for both variables.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\n# create new variables \"gender\" and \"jobgrade\"\ndiversity <- diversity|>\n  mutate(gender= factor(Gender,\n                        levels= c(1:2),\n                        labels= c(\"Female\", \"Male\")),\n         jobgrade= factor(JobGrade,\n                          levels= c(1:8),\n                          labels= c(\"Clerical/Officer\", \"Administrator/Assistant\", \"Graduate/Trainee Consultant\", \"Consultant\", \"Senior Consultant\", \"Managing Consultant\", \"Principal Consultant\", \"Partner\")))\n```\n:::\n\n\n\n-   Detect and rectify inaccuracies in the data\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\n# variables' levels\ndiversity|>\n  distinct(gender, jobgrade)\n\n# filter and drop \"NA\" levels and name the new data frame \"diversity1\"\ndiversity1 <- diversity|>\n  filter(gender!=\"NA\")|>\n  droplevels()\n\n#variables' levels filtered\ndiversity1|>\n  distinct(gender, jobgrade)\n```\n:::\n\n\n## Cross-tab\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\n# cross-tab; count and make a table for \"gender\" and \"jobgrade\" data\ndiversity1|>\n  count(gender, jobgrade)|>\n  pivot_wider(names_from = gender, values_from = n)|>\n  kable(col.names = c(\"JobGrade\", \"Female\", \"Male\"),\n        align = \"lrr\")\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> JobGrade </th>\n   <th style=\"text-align:right;\"> Female </th>\n   <th style=\"text-align:right;\"> Male </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Clerical/Officer </td>\n   <td style=\"text-align:right;\"> 31 </td>\n   <td style=\"text-align:right;\"> 8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Administrator/Assistant </td>\n   <td style=\"text-align:right;\"> 227 </td>\n   <td style=\"text-align:right;\"> 116 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Graduate/Trainee Consultant </td>\n   <td style=\"text-align:right;\"> 160 </td>\n   <td style=\"text-align:right;\"> 103 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Consultant </td>\n   <td style=\"text-align:right;\"> 139 </td>\n   <td style=\"text-align:right;\"> 104 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Senior Consultant </td>\n   <td style=\"text-align:right;\"> 98 </td>\n   <td style=\"text-align:right;\"> 152 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Managing Consultant </td>\n   <td style=\"text-align:right;\"> 68 </td>\n   <td style=\"text-align:right;\"> 171 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Principal Consultant </td>\n   <td style=\"text-align:right;\"> 19 </td>\n   <td style=\"text-align:right;\"> 62 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Partner </td>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:right;\"> 29 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n## Proportions of gender within each jobgrade\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\ndiversity1|>\n  count(gender, jobgrade)|>\n  group_by(jobgrade)|>\n  mutate(prop= round(n/sum(n)*100))|>\n  pivot_wider(id_cols = jobgrade, names_from = gender, values_from = prop)|>\n  kable(col.names = c(\"Job Grade\", \"Female (%)\", \"Male (%)\"),\n        align = \"lrr\")\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Job Grade </th>\n   <th style=\"text-align:right;\"> Female (%) </th>\n   <th style=\"text-align:right;\"> Male (%) </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Clerical/Officer </td>\n   <td style=\"text-align:right;\"> 79 </td>\n   <td style=\"text-align:right;\"> 21 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Administrator/Assistant </td>\n   <td style=\"text-align:right;\"> 66 </td>\n   <td style=\"text-align:right;\"> 34 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Graduate/Trainee Consultant </td>\n   <td style=\"text-align:right;\"> 61 </td>\n   <td style=\"text-align:right;\"> 39 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Consultant </td>\n   <td style=\"text-align:right;\"> 57 </td>\n   <td style=\"text-align:right;\"> 43 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Senior Consultant </td>\n   <td style=\"text-align:right;\"> 39 </td>\n   <td style=\"text-align:right;\"> 61 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Managing Consultant </td>\n   <td style=\"text-align:right;\"> 28 </td>\n   <td style=\"text-align:right;\"> 72 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Principal Consultant </td>\n   <td style=\"text-align:right;\"> 23 </td>\n   <td style=\"text-align:right;\"> 77 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Partner </td>\n   <td style=\"text-align:right;\"> 12 </td>\n   <td style=\"text-align:right;\"> 88 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n## Are women underrepresented in senior leadership roles within the organization?\n\n\nUp to this point, the data reveal a clear pattern: males are more common in senior roles, while females tend to occupy junior positions.\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"true\"}\n# Custom label function\n\npercent_label <- function(x) {\n  paste0(100*x, \"%\")\n}\n\n\nggplot(diversity1, aes(x=jobgrade, fill=gender))+\n  geom_bar(position = \"fill\", width = 0.7)+\n  labs(title = \"Gender by Job Grade\",\n      x = \"Job Grade\",\n      y = \"Proportions\",\n      fill= \"Gender\")+\n  theme_minimal(base_size = 14)+\n  theme(plot.background = element_blank(),\n        panel.grid = element_blank())+\n  scale_fill_manual(values = c(\"Female\" = \"#00589b\", \"Male\"= \"#ccddeb\"))+\n   scale_y_continuous(labels = percent_label, breaks = seq(0, 1, 0.25))+\n  coord_flip()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/graph II-1.png){fig-align='center' width=672}\n:::\n:::\n\n\n## Does this organization have a gender diversity issue?\n\n\n-   The data indicate a pattern where women are more commonly in junior roles and men in senior roles.\n-   However, it's unclear from the data whether this pattern is coincidental or statistically significant.\n-   To assess this, we can employ a chi-squared test to determine the statistical significance of the observed pattern.\n\n# Chi-Squared Test\n\n## The hypotheses\n\n\n**H0**: There is no association between gender and job grade within the organization.\n\n-   the observed distribution of females and males across job grades is due to random chance.\n\n**H1**: There is a significant association between gender and job grade within the organization.\n\n-   the observed distribution of females and males across job grades is not a result of random chance; it reflects a significant pattern of male predominance in senior roles and a greater representation of females in entry-level positions.\n\n\n## Chi squared test in R\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncross_tab <- table(diversity1$jobgrade, diversity1$gender)\nchisq.test(cross_tab)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\tPearson's Chi-squared test\n\ndata:  cross_tab\nX-squared = 164.7, df = 7, p-value < 2.2e-16\n```\n\n\n:::\n:::\n\n\n\n-   The p-value is extremely small, less than 2.2e-16, which is very close to zero.\n-   Since the p-value is less than the significance level of 0.05, we can confidently reject the null hypothesis, concluding that the two variables are dependent.\n-   This result indicates a statistically significant association between gender and job grade.\n-   It suggests that certain factors are influencing the observed distribution of genders within job grades.\n\n\n# Conclusions\n\n## Analyzing gender distribution across job grades\n\n-   Frequency tables and graphical visualization offer a concise summary of gender distribution across job grades, revealing a clear pattern: **men are more common in senior roles, while women predominantly hold junior positions.**\n\n-   The results of the chi-squared test, with a p-value close to zero, confirm **a very strong association between gender and job grade.**\n\n## Recommendation\n\n-   While this statistical evidence does not directly imply a gender diversity issue within the organization, it signals that factors beyond chance influence the gender distribution across job grades.\n-   To address potential gender bias or discrimination and foster diversity and inclusion within the organization, further analysis and actions are necessary.\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}