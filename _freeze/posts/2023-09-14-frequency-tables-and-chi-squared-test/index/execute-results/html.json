{
  "hash": "22185f56d0a8d434bdb9b10018648ac4",
  "result": {
    "markdown": "---\ntitle: \"Unlocking Insights: Analyzing Categorical Data with Frequency Tables and Chi-Squared Test\"\ndescription: \"Discover how to extract valuable insights from categorical data using frequency tables and the chi-squared test, with a real-world case study on gender representation in senior roles.\"\nauthor: \"Cozmina Secula\"\ndate: \"2023-09-14\"\nimage: diversity.jpg\ncategories: [frequency tables, chi-squared test, categorical variables, quantitative analysis]\nformat: \n  html: \n   code-fold: true\n   code-tools: true\nexecute: \n  echo: false\n  warning: false\n---\n\n\n# Introduction\n\nA people analytics project typically involves working with quantifiable data to address business questions and objectives. However, for data to be valuable, it requires analysis and interpretation, which is where analytical techniques become crucial. This post introduces two foundational tools for initiating data analysis: frequency tables and the chi-squared test.\n\nFrequency tables serve as common statistical instruments for categorical data analysis. They achieve this by counting the occurrences of variables within a dataset, providing a concise overview of the distribution and patterns within these categorical variables. When analyzing categorical data, it is often essential to determine if a significant relationship exists between two categorical variables within your dataset. The chi-squared test helps determine whether these two variables are associated or functionally related. In simpler terms, it quantifies the degree of independence between two categorical variables. When employed together, these two tools can unveil intriguing patterns and relationships within your data.\n\nIn this post, I will guide you through the utilization of frequency tables and the chi-squared test for insightful data analysis.\n\n# Understanding Frequency Tables\n\n## What is a frequency table?\n\nThe simplest way to summarize data for individual variables is to present them in a table, which displays specific amounts. In the case of categorical data, the table provides a summary of the number of cases (frequencies) in each category. This is known as a frequency table and is used when you want to summarize data for a single variable.\n\nHowever, when you want to examine the relationship between two variables simultaneously, you can use a different type of table called a contingency table or cross-tab. For example, when working with survey data, frequency tables can be very useful for gaining insights into the distribution and patterns of categorical variables.\n\n# Chi-Squared Test: An Overview\n\nA chi-squared test, also known as a chi-square or χ2 test, is a statistical hypothesis test commonly employed in the analysis of contingency tables, especially when dealing with large sample sizes. In simpler terms, this test is primarily used to determine whether two categorical variables (representing two dimensions of the contingency table) are independent in influencing the values observed within the table. [Learn more on Wikipedia](https://en.wikipedia.org/wiki/Chi-squared_test).\n\nThis test is frequently utilized in research to assess the independence of two variables. It operates by comparing the observed values in the table with what would be expected if the two distributions were entirely independent.\n\nIn essence, the chi-squared test evaluates the likelihood of the data in a table occurring solely by chance by contrasting it with the expected outcomes if the two variables were truly independent of each other.\n\n## Applying Chi-Squared Test\n\nThe procedure for assessing the presence of a significant difference between variables involves the following steps:\n\n1.  **Formulate the Hypotheses**: The null hypothesis (H0) assumes that there's no association between the variables (i.e., they are independent). The alternative hypothesis (H1) assumes that there is an association.\n2.  **Calculate Expected Values**: For each cell in the table, calculate the expected frequency if H0 is true. This is done by multiplying the row total and column total for that cell and dividing by the overall total.\n3.  **Compute Chi-Squared Statistic**: For each cell, subtract the expected frequency from the observed frequency, square the result, and divide by the expected frequency. Sum these values for all cells to get the Chi-Squared statistic.\n4.  **Determine Degrees of Freedom**: This is typically calculated as (number of rows - 1) \\* (number of columns - 1).\n5.  **Compute P-value**: Using the Chi-Squared statistic and degrees of freedom, compute the P-value from a Chi-Squared distribution table.\n6.  **Interpret Result** (determine statistical significance): If the P-value is less than your chosen significance level (often 0.05), reject H0 and conclude that there is a significant association between the variables.\n\n# Case Study: Gaining Insights with Chi-Squared Test and Frequency Tables\n\nIn this section, we will consider a case study focused on diversity and inclusion (D&I).The case study is sourced from the book [Predictive HR Analytics : Mastering the HR Metric](https://www.amazon.com/Predictive-HR-Analytics-Mastering-Metric/dp/0749473916). Our exploration will cover the creation of frequency tables, data preparation and analysis in R using both base R functions and the `tidyverse` and `ggplot2` packages. Additionally we will be going over the Chi Square test and its implementation using R.\n\n## The Business Problem\n\nThe company aims to investigate the possible underrepresentation of women in senior leadership roles within the organization. This inquiry is motivated by both commercial and people-centric considerations. From a commercial standpoint, the organization seeks to foster a greater diversity of thought in senior and strategic discussions. On the other hand, from a people perspective, the organization wants to assess whether it maintains gender balance by providing positive role models for younger employees.\n\n## The Research Question\n\nAre women underrepresented in senior leadership roles within the organization?\n\n## Data Preparation\n\nThe data are available [here](https://www.koganpage.com/hr-learning-development/predictive-hr-analytics-9780749484446)\n\n### Load in libraries\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(here)\nlibrary(ggplot2)\n```\n:::\n\n\n### Read the data\n\nLoad the data set and take a look at it.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- here(\"posts\",\"2023-09-14-frequency-tables-and-chi-squared-test\", \"diversity1.csv\")\ndiversity <- readr::read_csv(data)\ndiversity\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1,493 × 11\n   BossGender Gender JobGrade   Age Tenure Status PerformanceScore\n        <dbl>  <dbl>    <dbl> <dbl>  <dbl>  <dbl>            <dbl>\n 1          1      1        6    39      0      1                4\n 2          1      1        5    37      6      1                4\n 3          1      1        5    35      1      1                4\n 4          1      1        3    30      3      1                4\n 5          1      1        6    33      0      1               NA\n 6          1      1        7    40      0      1                4\n 7          1      1        6    49      8      1                4\n 8          1      1        5    37      1      1                5\n 9          1      1        6    33     11      1                4\n10          1      1        6    38      2      1                4\n# ℹ 1,483 more rows\n# ℹ 4 more variables: BossPerformance <dbl>, Division <dbl>, Country <dbl>,\n#   leaver <dbl>\n```\n:::\n:::\n\n\nWe have information about 1483 employees, each with 11 variables recorded. Our primary goal is to determine whether there is an underrepresentation of women in senior leadership positions within the organization. The specific variables we are focusing on are Gender and JobGrade. To accomplish our objective, we will begin by selecting the data related these key variables.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndiversity1 <- diversity %>% \n  select(Gender, JobGrade)\ndiversity1\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1,493 × 2\n   Gender JobGrade\n    <dbl>    <dbl>\n 1      1        6\n 2      1        5\n 3      1        5\n 4      1        3\n 5      1        6\n 6      1        7\n 7      1        6\n 8      1        5\n 9      1        6\n10      1        6\n# ℹ 1,483 more rows\n```\n:::\n:::\n\n\nBased on the case study description, we have data from a management consulting firm comprising 1,493 employees, with 746 being female and 745 being male. At first glance, it appears to indicate an organization with an equal gender balance, with 50 percent male and 50 percent female representation. The organization comprises eight distinct job grades, which are listed alongside their corresponding numbers in Table 1.\n\n| Grade | Job Grade                   |\n|-------|-----------------------------|\n| 1     | Clerical/Officer            |\n| 2     | Administrator/Assistant     |\n| 3     | Graduate/Trainee Consultant |\n| 4     | Consultant                  |\n| 5     | Senior Consultant           |\n| 6     | Managing Consultant         |\n| 7     | Principal Consultant        |\n| 8     | Partner                     |\n\n: Table 1: Description of JobGrades\n\nWe have also noticed that the variables are currently represented by numerical values, although Genders and JobGrade are categorical variables, not numerical ones. The next step involve: - replacing these numerical values with descriptive labels for both variables - calculate frequencies for each variable - create contingency table to see gender distribution across job grade\n\n\n::: {.cell}\n\n```{.r .cell-code}\nJobGrade <- factor(diversity1$JobGrade,\n    levels = c(1:8),\n    labels = c(\"Clerical/Officer\",\"Administrator/Assistant\",\"Graduate/Trainee Consultant\",\"Consultant\",\"Senior Consultant\",\"Managing Consultant\",\"Principal Consultant\",\"Partner\")) # replacing numerical values with descriptive labels for JobGrade\n\nFreq1= table(JobGrade) # creates a frequency table for the variable JobGrade\nFreq1\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nJobGrade\n           Clerical/Officer     Administrator/Assistant \n                         39                         343 \nGraduate/Trainee Consultant                  Consultant \n                        265                         243 \n          Senior Consultant         Managing Consultant \n                        250                         239 \n       Principal Consultant                     Partner \n                         81                          33 \n```\n:::\n\n```{.r .cell-code}\nPcntGrade <- table(JobGrade) # calculate the proportions of the different factor levels in JobGrade\nprop.table(PcntGrade) \n```\n\n::: {.cell-output .cell-output-stdout}\n```\nJobGrade\n           Clerical/Officer     Administrator/Assistant \n                 0.02612190                  0.22973878 \nGraduate/Trainee Consultant                  Consultant \n                 0.17749498                  0.16275954 \n          Senior Consultant         Managing Consultant \n                 0.16744809                  0.16008038 \n       Principal Consultant                     Partner \n                 0.05425318                  0.02210315 \n```\n:::\n\n```{.r .cell-code}\n#| label: Gender\n\nGender <- factor(diversity1$Gender,\nlevels = c(1,2),\nlabels = c(\"Female\", \"Male\")) # replacing numerical values with descriptive labels for Gender\n\nFreq2= table(Gender) # creates a frequency table for the variable Gender\nFreq2\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nGender\nFemale   Male \n   746    745 \n```\n:::\n\n```{.r .cell-code}\nPcntGender <- table(Gender)\nprop.table(PcntGender) # calculate the proportions of the different factor levels in Gender\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nGender\n   Female      Male \n0.5003353 0.4996647 \n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nCrossTable <- table(JobGrade, Gender) # create a contingency table\nCrossTable\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                             Gender\nJobGrade                      Female Male\n  Clerical/Officer                31    8\n  Administrator/Assistant        227  116\n  Graduate/Trainee Consultant    160  103\n  Consultant                     139  104\n  Senior Consultant               98  152\n  Managing Consultant             68  171\n  Principal Consultant            19   62\n  Partner                          4   29\n```\n:::\n\n```{.r .cell-code}\nGenderByGrade <- as.data.frame(round(prop.table(CrossTable,1)*100,2))\nGenderByGrade\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                      JobGrade Gender  Freq\n1             Clerical/Officer Female 79.49\n2      Administrator/Assistant Female 66.18\n3  Graduate/Trainee Consultant Female 60.84\n4                   Consultant Female 57.20\n5            Senior Consultant Female 39.20\n6          Managing Consultant Female 28.45\n7         Principal Consultant Female 23.46\n8                      Partner Female 12.12\n9             Clerical/Officer   Male 20.51\n10     Administrator/Assistant   Male 33.82\n11 Graduate/Trainee Consultant   Male 39.16\n12                  Consultant   Male 42.80\n13           Senior Consultant   Male 60.80\n14         Managing Consultant   Male 71.55\n15        Principal Consultant   Male 76.54\n16                     Partner   Male 87.88\n```\n:::\n:::\n\n\n## Data Analysis\n\nThe visualization below shows that women predominantly occupy entry-level roles, while men are more prevalent in senior positions. For instance, the \"clerical_officer\" role comprises 80% females and 20% males, whereas the \"partner\" role is represented by nearly 90% males and just over 10% females. Up to this point, the data reveals an observable pattern, men are more prevalent in senior roles and women predominantly occupy junior roles. but it's not completely obvious just from looking at the data whether the company experiences a diversity and inclusion issue or if this is just due to chance. The next step involves conducting a statistical analysis to determine the significance of this pattern. To achieve this, we will perform a Chi-squared test.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(GenderByGrade, aes(x=JobGrade, y=Freq, fill=Gender))+\n  geom_col()+\n  facet_grid(vars(Gender))+\n  guides(fill= \"none\")+\n  theme(axis.text.x = element_text(angle = 45, hjust = 1),\n        panel.background = element_blank())+\n   labs(title = \"GenderByGrade\", \n       subtitle = \"Graphical representation of male/female % within each Job grade\", \n       x = \"Job Grade\", \n       y = \"Percentage\", \n       fill = \"Gender\")+\n   scale_y_continuous(breaks=seq(10, 100, by=10))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/graphical-representation-1.png){width=672}\n:::\n:::\n\n\n# Chi-Squared Test\n\nFor the Chi-Squared test we begin by making two hypotheses:\n\nH0: There is no association between gender and job grade within the organization. The observed distribution of females and males across job grades is due to random chance.\n\nH1: There is a significant association between gender and job grade within the organization. The observed distribution of females and males across job grades is not a result of random chance; it reflects a significant pattern of male predominance in senior roles and a greater representation of females in entry-level positions\n\nWhen conducted, the test gives us a \"p\" value as the result, using which you conclude whether your hypothesis of independence is true or not. In simple words, the \"p\" value is just the likelihood of your variables being independent.\n\nParticularly in this test, it's crucial to examine the p-values. If the resulting p-value is lower than the typical predetermined significance level of 0.05, we would then reject the null hypothesis.\n\n## Conducting a Chi Square Test in R\n\nWe will utilize data from \"CrossTable\", which provides information about gender and job grade.\n\nThe \"chisq.test()\" function is an built-in function of R that enables you to perform the Chi-Square test. It will provide us with all the necessary information to determine the independence of variables within a data set and help us conclude whether they are related or not.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nchisq.test(CrossTable)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\tPearson's Chi-squared test\n\ndata:  CrossTable\nX-squared = 164.7, df = 7, p-value < 2.2e-16\n```\n:::\n:::\n\n\nThe p-value is extremely small, less than 2.2e-16, which is very close to zero. Since the p-value is less than the significance level of 0.05, we can confidently reject the null hypothesis, concluding that the two variables are dependent.\n\nThis result indicates a statistically significant association between gender and job grade. It suggests that certain factors are influencing the observed distribution of genders within job grades.\n\nHowever, we cannot definitively determine whether these factors may involve forms of discrimination. Further analysis is needed to investigate this possibility.\n\n# Conclusions\n\nIn this article, we explored the power of two fundamental tools for analyzing categorical data: frequency tables and the chi-squared test. Frequency tables provide a clear summary of the distribution and patterns within categorical variables, while the chi-squared test helps us determine if there's a significant relationship between two categorical variables.\n\nThrough a case study on gender representation in senior roles, we demonstrated how these tools can reveal crucial insights. We found a noticeable gender disparity, with men predominantly occupying senior positions and women largely in junior roles.\n\nThe chi-squared test's results, with a p-value close to zero, confirmed a significant association between gender and job grade. While this statistical evidence does not directly imply discrimination, it signals that factors beyond chance influence this distribution.\n\nTo address potential discrimination and foster diversity and inclusion, further analysis and actions are necessary. These tools empower organizations to make data-driven decisions and drive positive change in their workforce dynamics.\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}