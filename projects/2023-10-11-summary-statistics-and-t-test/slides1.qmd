---
title: "Unlocking Insights (II): Analyzing Data with Summary Statistics and Independent Samples t-Test"
description: "Discover how to extract valuable insights using summary statistics and the independent samples t-test, with a case study on team diversity within a large organization."
categories: [summary statistics, independent samples t-test, continuous variable, categorical variable, quantitative analysis]
draft: true
format: 
  revealjs: 
   theme: theme.scss
   transition: fade
   background-transition: fade
   embed-resources: true
code-link: true
toc-depth: 1
execute:
  echo: true
  freeze: auto
---

# Overview of the Presentation

```{r}
#| label: load-packages
#| echo: false
 library(tidyverse)
 library(kableExtra)
 library(car)
 library(paletteer)


```

## Introducing two distinct tools for data analysis with numerical and categorical data

-   summary statistics
-   independent samples t-test

## Case study

-   focused on diversity and inclusion (D&I)
-   sourced from the book [Predictive HR Analytics : Mastering the HR Metric](https://www.amazon.com/Predictive-HR-Analytics-Mastering-Metric/dp/0749473916)
-   with data available [here](https://www.koganpage.com/hr-learning-development/predictive-hr-analytics-9780749484446)

## Data exploration and analysis

-   `tidyverse`, `kableExtra`, `car` packages
-   data preparation
-   summary statistics
-   data visualization
-   independent samples t-test

# The Business Perspective

## The organization goal: to enhance diversity by ensuring robust representation of BAME individuals

::: small
-   **Commercial perspective**

    -   a more diverse workforce offers a competitive edge by enhancing the organization's understanding of its customers and subsequently improving overall performance

-   **People perspective**

    -   the organization gains access to a broader candidate pool, boosts employee engagement, and elevates retention rates.
:::

## The research question

<br>

*How does the distribution of BAME individuals vary across different professions?*

# Data Preparation and Exploration

## Read data

```{r}
#| label: read-data
#| echo: true
#| warning: false

diversity <- read_csv("../2023-10-11-summary-statistics-and-t-test/diversity2.csv")
glimpse(diversity)

```

-   928 observations and 30 variables
-   data type: double <dbl> for all variables

## Description of variables of interest

<br>

::: small
-   **Variables of Interest:**

    -   **BAME:** Percentage of the team comprised of Black, Asian, or Minority Ethnic employees.

    -   **Function:** Function 1 = Sales staff (customer-facing roles) or 2 = Professional Service (non-customer-facing roles).

-   Both variables are of data type double (dbl), in the data set.

-   The "BAME" variable is numerical, while the "Function" variable is categorical and needs to be transformed into a factor for R analysis.
:::

## Data preparation (I)

::: small
```{r}
#| label: new-variable-function-as-factor

# Create a new variable named "profession" with two levels "Sales Staff" and "Professional Service"
diversity <- diversity|>
  mutate(profession = factor(Function,
                           levels = c(1:2),
                           labels = c("Sales Staff", "Professional Service")))


# Check levels of the new variable
diversity|>
  distinct(diversity$profession)

# Drop "NA" levels as they are not meaningful for the analysis
diversity_filtered <- diversity|>
  filter(profession != "NA")|>
  droplevels()

# Check variable levels after dropping "NA" 
diversity_filtered|>
  distinct(profession)

```
:::

## Data preparation (II)

::: small
```{r}

#| label: new-data-frame-BAME_profession


# Creating a new data frame "bame_profession" including variables of interest

bame_profession <- diversity_filtered|>
  select(BAME, profession)

glimpse(bame_profession)
```
:::

# Summary statistics

## Summary statistics: Measures of center

<br>

::: small
```{r}
#| label: mesures-of-center

bame_profession|>
  group_by(profession)|>
  summarise(mean=mean(BAME, na.rm = TRUE),
            median=median(BAME, na.rm = TRUE),
            iqr=IQR(BAME, na.rm =TRUE),
            sd=sd(BAME, na.rm = TRUE),
            n= sum(!is.na(BAME)))|>
  kable(col.names = c("Profession", "Mean", "Median", "IQR", "Std. Deviation", "Sum"), align = "cccc")
  
```
:::

::: goal
::: small
-   There is a difference between the mean, median, IQR, and standard deviation of the BAME percentage in the "Sales Staff" and "Professional Service" groups.
-   404 teams within the "Sales Staff" profession and 342 teams within "Professional Service" profession reported the percentages of BAME.
:::
:::

## Summary statistics: Density plot

::: small
::: columns
::: {.column width="75%"}
```{r}
#| label: density-plot

ggplot(bame_profession, aes(x=BAME, fill=profession))+
  geom_density(alpha = 0.5)+
  labs(title = "BAME distribution by Profession",
      x = "BAME",
      y = "Density",
      fill = "Profession")+
  theme_minimal(base_size = 14)+
  scale_fill_manual(values = c("Sales Staff"= "#33645FFF", "Professional Service" = "#9D1B1FFF" ))

```
:::

::: {.column width="25%"}
<br><br><br><br><br>

BAME percentages are lower among "Sales Staff"; they are more evenly distributed among "Professional Service" teams.
:::
:::
:::

## Summary statistics: Boxplots with points

::: small
::: columns
::: {.column width="75%"}
```{r}
#| label: boxplot-with-points

ggplot(bame_profession, aes(x=profession, y= BAME, color = profession))+
  geom_boxplot(width = 0.5)+
  geom_point(position = position_jitter(height = 0), size = 1, alpha= 0.5)+
  labs( title= "BAME variance by Profession", 
        x= NULL,
        y= "BAME percentage")+
  theme_minimal(base_size = 14)+
  scale_color_manual(values = c("Sales Staff"= "#33645FFF", "Professional Service" = "#9D1B1FFF" ))+
  theme(legend.position = "none")
```
:::

::: {.column width="25%"}
<br><br><br><br><br>

There is a higher variance of BAME representation in the "Professional Service" profession compared to the "Sales Staff" profession.
:::
:::
:::

## *How does the distribution of BAME individuals vary across different professions?*

<br><br>

::: small
-   The distribution of BAME individuals varies across the two professions with more "Sales Staff" teams with a lower percentage of BAME individuals and "Professional Service" with a more evenly distribution.
-   However, these findings are derived from summary statistics and visual examinations, which may not be highly precise.
-   To gain greater confidence in comparing BAME representation between the two professions and to gain a deeper understanding of the organization's ethnicity dynamics, we will conduct an Independent Samples t-Test.
:::

# Independent Samples t-Test

## Levene's Test for Equality of Variances (I)

::: small
::: goal
One of the requirements for the Independent Samples t-Test is the homogeneity of variances (i.e., variances approximately equal across groups).
:::

-   If this requirement is violated and the sample sizes for each group differ, there is an option to calculate t-test statistics. An approximate t-statistic is also included in the independent samples t-test output, which does not assume equal variances across populations. The Welch t-test statistic can be used when equal variances between populations cannot be assumed.
:::

## Levene's Test for Equality of Variances (II)

::: small
**The hypotheses**

-   H0: The population variances of "Sales Staff" and "Professional Service" are equal.
-   H1: The population variances of "Sales Staff" and "Professional Service" are not equal.

```{r}
#| label: levene's-test-for-equality-of-variances

leveneTest(bame_profession$BAME, group = bame_profession$profession, center=mean)

```

-   The p-value is 4.141e-09, less than 0.05. This indicates that there's very strong evidence against the null hypothesis. We reject the null hypothesis of Levene's Test.

-   This imply that the variances of the two groups are not equal (i.e., that the homogeneity of variances assumption is violated)
:::

## Independent Samples t-Test (I)

::: small
-   We want to test whether the means for BAME individuals among "Sales Staff" profession and BAME individuals among "Professional Service" profession in this organization are statistically different.
-   We can use an Independent Samples t-Test to compare the mean of BAME percentages for "Sales Staff" and " Professional Service"

<br>

**The hypotheses**

-   H0:The difference of the means are is equal to 0
-   H1:The difference of the means is not equal to 0.
:::

## Independent Samples t-Test (II)

::: small
```{r}
#| label: Independent-Samples-t-Test

t.test(bame_profession$BAME ~ bame_profession$profession, var.equal = TRUE)
t.test(bame_profession$BAME ~ bame_profession$profession, var.equal = FALSE)

```
:::

## Independent Samples t-Test (III)

::: small
-   The result of Levene's Test tells us that we should look at the Welch Two Sample t-test due to the fact the variances of the two groups are not equal.
-   The p-value = 2.345e-08 for t-test for unequal variances is less than 0.001; we conclude that there is a significant difference in mean percentage BAME between the two functions.

::: goal
-   In comparing the "Sales Staff" and the "Professional Service" functions, the mean proportion of BAME staff is significantly lower in "Sales Staff" than in "Professional Service".
-   The average proportion of BAME staff in teams within the "Sales Staff" is 9.7 %, and by comparison, the average proportion of BAME staff in teams within the "Professional Service" function is 14.39 %.
-   Deeper analysis shows that the likelihood of this difference occurring by chance alone is less than 1 in 1,000, suggesting there is an issue that needs attention within the "Sales Staff" function within the organization.
:::
:::

# Conclusions

## Conclusions

::: small
-   summary statistics and graphical visualization provided a clear summary of the distribution of BAME individuals across the two professions: **more "Sales Staff" teams have a lower percentage of BAME individuals and "Professional Service" teams have a more evenly distribution.**

-   the independent samples t-test's results, with a p-value close to the 0, **confirmed a strong difference in mean percentage BAME between the two functions, suggesting there is an issue that needs attention within the "Sales Staff" function within the organization.**
:::

## Recomendations

-   According to our analysis, the organization faces challenges in BAME representation across professions, particularly in the "Sales Staff".
-   Further research may be conducted to determine what factors influence or are associated with differences in diversity between the two teams.
